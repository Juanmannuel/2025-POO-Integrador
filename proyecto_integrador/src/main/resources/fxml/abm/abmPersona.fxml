<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.app_eventos.controllers.ABMPersonaController">

    <!-- CONTENIDO PRINCIPAL -->
    <VBox spacing="20" style="-fx-padding: 20;" VBox.vgrow="ALWAYS">

        <!-- Título y botón alineado a la derecha -->
        <HBox alignment="CENTER_LEFT" spacing="10" HBox.hgrow="ALWAYS">
            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Gestión de Personas" />
            <Region HBox.hgrow="ALWAYS" />
        </HBox>

        <!-- Panel contenedor con filtros y tabla -->
        <VBox spacing="15" styleClass="panel-contenedor" VBox.vgrow="ALWAYS">

            <!-- FILTROS -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="DNI:" />
                <TextField fx:id="txtDNIFiltro" prefWidth="120" promptText="Buscar por DNI" />
                <Label text="Nombre:" />
                <TextField fx:id="txtNombreFiltro" prefWidth="120" promptText="Buscar por nombre" />
            </HBox>

            <!-- TABLA -->
            <TableView fx:id="tablaPersonas" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colDNI" text="DNI" />
                    <TableColumn fx:id="colNombre" text="Nombre" />
                    <TableColumn fx:id="colApellido" text="Apellido" />
                    <TableColumn fx:id="colTelefono" text="Teléfono" />
                    <TableColumn fx:id="colEmail" prefWidth="220" text="Email" />
                </columns>
            </TableView>

            <HBox alignment="CENTER_RIGHT" spacing="12">
                <Button onAction="#mostrarModal" styleClass="btn-alta" text="Alta" />
                <Button onAction="#modificarPersona" styleClass="btn-modificar" text="Modificar" />
                <Button onAction="#eliminarPersona" styleClass="btn-baja" text="Baja" />
            </HBox>
        </VBox>
    </VBox>

    <!-- VENTANA MODAL NUEVA PERSONA -->
    <StackPane fx:id="modalOverlay" visible="false" styleClass="modal-overlay">
        <VBox spacing="20" styleClass="modal-contenido" prefWidth="620" maxWidth="620" maxHeight="360">
            <Label text="Persona" styleClass="modal-titulo" />

            <!-- Formulario: Grid de 2 columnas, Email ocupa ambas -->
            <GridPane hgap="20" vgap="12" style="-fx-padding: 10;">
                <columnConstraints>
                    <!-- Dos columnas que crecen y comparten el ancho -->
                    <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                    <ColumnConstraints hgrow="ALWAYS" percentWidth="50"/>
                </columnConstraints>

                <!-- Fila 0: Etiquetas -->
                <Label text="DNI" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <Label text="Nombre" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <!-- Fila 1: Campos -->
                <TextField fx:id="txtDNI" promptText="Ingrese el DNI"
                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                           GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="txtNombre" promptText="Ingrese el Nombre"
                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                           GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <!-- Fila 2: Etiquetas -->
                <Label text="Apellido" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <Label text="Teléfono" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                <!-- Fila 3: Campos -->
                <TextField fx:id="txtApellido" promptText="Ingrese el Apellido"
                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                           GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <TextField fx:id="txtTelefono" promptText="Ingrese un número de teléfono"
                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                           GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                <!-- Fila 4: Etiqueta Email (ocupa 2 columnas) -->
                <Label text="Email"
                       GridPane.rowIndex="4" GridPane.columnIndex="0" GridPane.columnSpan="2"/>

                <!-- Fila 5: Campo Email (ocupa 2 columnas y se estira a todo el ancho) -->
                <TextField fx:id="txtEmail" promptText="Ingrese un Email"
                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                           GridPane.rowIndex="5" GridPane.columnIndex="0" GridPane.columnSpan="2"/>
            </GridPane>

            <!-- Botones -->
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Button text="Cancelar" onAction="#cerrarModal" styleClass="btn-cancelar" />
                <Button text="Guardar" onAction="#altaPersona" styleClass="btn-guardar" />
            </HBox>
        </VBox>
    </StackPane>
</StackPane>
