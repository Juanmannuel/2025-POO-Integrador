<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane xmlns="http://javafx.com/javafx/24.0.1"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.app_eventos.controllers.ABMPeliculaController">

    <!-- CONTENIDO PRINCIPAL -->
    <VBox spacing="20" style="-fx-padding: 20;" VBox.vgrow="ALWAYS">

        <!-- Título -->
        <HBox alignment="CENTER_LEFT" spacing="10" HBox.hgrow="ALWAYS">
            <Label text="Gestión de Películas" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
        </HBox>

        <!-- Panel contenedor con filtros y tabla -->
        <VBox spacing="15" styleClass="panel-contenedor" VBox.vgrow="ALWAYS">

            <!-- FILTROS -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ID:"/>
                <TextField fx:id="txtIDFiltro" prefWidth="120" promptText="Buscar por ID"/>
                <Label text="Título:"/>
                <TextField fx:id="txtNombreFiltro" prefWidth="180" promptText="Buscar por título"/>
            </HBox>

            <!-- TABLA -->
            <TableView fx:id="tablaPeliculas" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colTitulo"   text="Título"   prefWidth="260"/>
                    <TableColumn fx:id="colDuracion" text="Duración" prefWidth="140"/>
                    <TableColumn fx:id="colTipo"     text="Tipo"     prefWidth="120"/>
                </columns>
            </TableView>

            <!-- ACCIONES -->
            <HBox alignment="CENTER_RIGHT" spacing="12">
                <Button text="Alta" styleClass="btn-alta" onAction="#mostrarModal"/>
                <Button text="Modificar" styleClass="btn-modificar" onAction="#modificarPelicula"/>
                <Button text="Baja" styleClass="btn-baja" onAction="#eliminarPelicula"/>
            </HBox>
        </VBox>
    </VBox>

    <!-- MODAL -->
    <StackPane fx:id="modalOverlay" visible="false" styleClass="modal-overlay">
        <VBox maxWidth="620" maxHeight="200" spacing="15" styleClass="modal-contenido">
            <Label text="Película" styleClass="modal-titulo"/>

            <GridPane hgap="15" vgap="10">
                <columnConstraints>
                    <ColumnConstraints percentWidth="50" hgrow="ALWAYS"/>
                    <ColumnConstraints percentWidth="50" hgrow="ALWAYS"/>
                </columnConstraints>

                <!-- TÍTULO (ocupa 2 columnas) -->
                <Label text="Título" GridPane.rowIndex="0" GridPane.columnIndex="0" GridPane.columnSpan="2"/>
                <TextField fx:id="txtTitulo" promptText="Ingrese el título de la película"
                        maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                        GridPane.rowIndex="1" GridPane.columnIndex="0" GridPane.columnSpan="2"/>

                <!-- DURACIÓN (columna izquierda) -->
                <Label text="Duración" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <HBox spacing="8" GridPane.rowIndex="3" GridPane.columnIndex="0">
                    <Spinner fx:id="spinnerDuracion"/>
                    <Label text="(HH:mm)"/>
                </HBox>

                <!-- TIPO (columna derecha) -->
                <Label text="Tipo" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                <ComboBox fx:id="comboTipoPelicula" promptText="Seleccione tipo"
                        maxWidth="Infinity" GridPane.hgrow="ALWAYS"
                        GridPane.rowIndex="3" GridPane.columnIndex="1"/>
            </GridPane>

            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button text="Cancelar" styleClass="btn-cancelar" onAction="#cerrarModal"/>
                <Button text="Guardar"  styleClass="btn-guardar"  onAction="#altaPelicula"/>
            </HBox>
        </VBox>
    </StackPane>
</StackPane>
